(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[850],{94126:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cp/contact",function(){return i(80307)}])},21676:function(e,t,i){"use strict";i.d(t,{LT:function(){return c},YW:function(){return d},hg:function(){return h}});var l=i(85893),n=i(20596),s=i(46574),a=i(47041),r=i(11163),o=i(67294);let c=e=>{let{children:t}=e,i=(0,r.useRouter)(),[c,u]=(0,o.useState)(!0),d=(0,a.getCookie)("flit_access_token");return d||(d=sessionStorage.getItem("flit_access_token")),(0,o.useEffect)(()=>{d?i.push("/cp"):u(!1),u(!1)},[d,i]),(0,l.jsx)(l.Fragment,{children:c?(0,l.jsx)(n.gb,{open:!0}):(0,l.jsx)(s.Z,{maxWidth:"md",children:t})})};var u=i(5616);function d(e){let{children:t}=e;return(0,l.jsx)(u.Z,{children:t})}function h(e){let{children:t}=e,[i,s]=(0,o.useState)(!0),c=(0,r.useRouter)(),d=(0,a.getCookie)("flit_access_token");return d||(d=sessionStorage.getItem("flit_access_token")),(0,o.useEffect)(()=>{d?s(!1):c.push("/cp/auth/login")},[d,c]),(0,l.jsx)(l.Fragment,{children:i?(0,l.jsx)(n.gb,{open:i}):(0,l.jsx)(u.Z,{id:"pr-app-root",component:"main",className:"main-layout-wrapper",children:(0,l.jsxs)(u.Z,{id:"pr-app-wrapper",className:"app-wrapper",children:[(0,l.jsx)(n.zZ,{}),(0,l.jsx)(u.Z,{className:"app-main",children:t})]})})})}},80307:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return S}});var l=i(85893),n=i(20596),s=i(21676),a=i(21248),r=i(41533),o=i(37206),c=i(80016),u=i(51233),d=i(53252),h=i(67294),p=i(4480);i(36985);var m=i(94951),x=i(91444),f=i(43584);let j=(0,p.atom)({key:"contactListState",default:[]}),g=(0,p.atom)({key:"contactActiveState",default:null}),_=async e=>{let t=(0,f.$l)(j);return(0,f.z8)(o.RB,!((null==t?void 0:t.length)>0)),await m.PC.readContactListApi({page:e.page,size:e.size}).then(e=>{e&&((0,f.z8)(j,e.items),(0,f.z8)(o.f4,e.pages?e.pages:0))}).catch(e=>(x.Am.error((0,c.t)("failSubmitForm")),Promise.reject(e))).finally(()=>{(0,f.z8)(o.RB,!1)})};var v=i(49676),w=i(42180),b=i(15861);let Z=()=>{var e,t,i,n,s;let[a,o]=(0,p.useRecoilState)(r.TX),[c,d]=(0,p.useRecoilState)(g);return(0,l.jsx)(w.Z,{open:a,maxWidth:"sm",title:"Contact detail",onClose:()=>{o(!a),d(null)},children:(0,l.jsxs)(u.Z,{border:1,borderColor:v.U.gray200,borderRadius:"4px",children:[(0,l.jsx)(C,{title:"Full Name",subTitle:null!==(e=null==c?void 0:c.fullname)&&void 0!==e?e:""}),(0,l.jsx)(C,{title:"Email",subTitle:null!==(t=null==c?void 0:c.email)&&void 0!==t?t:"",isGray:!0}),(0,l.jsx)(C,{title:"Phone",subTitle:null!==(i=null==c?void 0:c.phone)&&void 0!==i?i:""}),(0,l.jsx)(C,{title:"Title",subTitle:null!==(n=null==c?void 0:c.title)&&void 0!==n?n:"",isGray:!0}),(0,l.jsx)(C,{title:"Message",subTitle:null!==(s=null==c?void 0:c.message)&&void 0!==s?s:""})]})})},C=e=>{let{subTitle:t,title:i,isGray:n}=e;return(0,l.jsxs)(u.Z,{direction:"row",bgcolor:n?v.U.gray200:"",py:1,px:2,children:[(0,l.jsx)(b.Z,{width:"160px",children:i}),(0,l.jsx)(b.Z,{children:t})]})},k=()=>{let[e,t]=(0,p.useRecoilState)(r.TX),i=(0,p.useRecoilValue)(o.Fx),s=(0,p.useRecoilValue)(j),m=(0,p.useSetRecoilState)(g),x=i=>{t(!e),m(i)};(0,h.useEffect)(()=>{_(i)},[i]);let f=(0,l.jsx)(u.Z,{direction:"row",justifyContent:"space-between",children:(0,l.jsx)(n.Um,{})});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n._i,{headCells:y,maxHeight:"calc(100vh - 230px)",actionHeadProps:f,children:(null==s?void 0:s.length)>0&&s.map((e,t)=>(0,l.jsxs)(a.T,{onClick:()=>x(e),hiddenDeleteButton:!0,isShowView:!0,isHidenEdit:!0,children:[(0,l.jsx)(d.Z,{children:(0,c.RE)(t)}),(0,l.jsx)(d.Z,{children:e.fullname}),(0,l.jsx)(d.Z,{children:e.email}),(0,l.jsx)(d.Z,{children:e.phone}),(0,l.jsx)(d.Z,{children:e.title}),(0,l.jsx)(d.Z,{children:e.message})]},e.id))}),e&&(0,l.jsx)(Z,{})]})},y=[{id:"id",title:"ID",width:10},{id:"fullname",title:"fullname",width:50},{id:"email",title:"email"},{id:"phone",title:"phone",width:50},{id:"title",title:"title"},{id:"message",title:"message"},{width:100,id:"action",title:"",align:"right"}];function S(){return(0,h.useEffect)(()=>((0,f.z8)(r.Qb,[{name:"Dashboard",to:"/cp"},{name:"Contacts",to:""}]),()=>{(0,f.z8)(r.Qb,[])}),[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.$y,{title:"Contacts"}),(0,l.jsx)(k,{})]})}S.Layout=s.hg}},function(e){e.O(0,[578,951,888,774,179],function(){return e(e.s=94126)}),_N_E=e.O()}]);